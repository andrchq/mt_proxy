–°–µ–≥–æ–¥–Ω—è —Ä–∞–∑–±–µ—Ä—ë–º –ø–æ–ª–Ω—É—é –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é: –æ—Ç –≤—ã–±–æ—Ä–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ VPS –¥–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π –º–∞—Å–∫–∏—Ä–æ–≤–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞.

–ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ?
Telegram ‚Äî –æ–¥–∏–Ω –∏–∑ —Å–∞–º—ã—Ö –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–æ–≤ –≤ –º–∏—Ä–µ. –ù–æ –≤ —Ä—è–¥–µ —Å—Ç—Ä–∞–Ω –µ–≥–æ –±–ª–æ–∫–∏—Ä—É—é—Ç –∏–ª–∏ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—é—Ç. –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–µ VPN –ª–µ–≥–∫–æ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞—é—Ç—Å—è, –∞ –æ–±—ã—á–Ω—ã–µ –ø—Ä–æ–∫—Å–∏ –µ—â—ë –ª–µ–≥—á–µ. MTProto Proxy —ç—Ç–æ —à—Ç–∞—Ç–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º Telegram –¥–ª—è –æ–±—Ö–æ–¥–∞ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫, –∫–æ—Ç–æ—Ä—ã–π:

–†–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è Telegram (–Ω–µ –¥–ª—è –≤—Å–µ–≥–æ —Ç—Ä–∞—Ñ–∏–∫–∞)

–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç Fake TLS –º–∞—Å–∫–∏—Ä–æ–≤–∫—É –ø–æ–¥ –æ–±—ã—á–Ω—ã–π HTTPS-—Ç—Ä–∞—Ñ–∏–∫

–ù–µ —Ç—Ä–µ–±—É–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –≤—Å—ë –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –ø—Ä—è–º–æ –≤ Telegram

–ü–æ—Ç—Ä–µ–±–ª—è–µ—Ç –º–∏–Ω–∏–º—É–º —Ä–µ—Å—É—Ä—Å–æ–≤ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

–ì–¥–µ —Ä–∞–∑–º–µ—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä: –†–æ—Å—Å–∏—è vs –∑–∞—Ä—É–±–µ–∂
–ö–æ–Ω—Ç—Ä–∏–Ω—Ç—É–∏—Ç–∏–≤–Ω—ã–π —Å–æ–≤–µ—Ç: –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤–Ω—É—Ç—Ä–∏ –†–æ—Å—Å–∏–∏ —á–∞—Å—Ç–æ –≤—ã–≥–æ–¥–Ω–µ–µ –±—Ä–∞—Ç—å VPS –≤–Ω—É—Ç—Ä–∏ –†–æ—Å—Å–∏–∏, –∞ –Ω–µ –∑–∞ –≥—Ä–∞–Ω–∏—Ü–µ–π.

–ü–æ—á–µ–º—É VPS –≤ –†–æ—Å—Å–∏–∏ –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –ª—É—á—à–µ?
–ö—Ä–∏—Ç–µ—Ä–∏–π

VPS –≤ –†–æ—Å—Å–∏–∏

VPS –∑–∞ —Ä—É–±–µ–∂–æ–º

–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞

‚ö†Ô∏è –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –º–µ–∂–¥—É —Ä–æ—Å—Å–∏–π—Å–∫–∏–º–∏ —Å–µ—Ä–≤–µ—Ä–∞–º–∏

‚ùå –ñ—ë—Å—Ç–∫–∞—è –Ω–∞ –≥—Ä–∞–Ω–∏—Ü–µ –†–§

–°–∫–æ—Ä–æ—Å—Ç—å

‚úÖ –ù–∏–∑–∫–∏–µ –ø–∏–Ω–≥–∏ (5-20 –º—Å)

‚ö†Ô∏è –í—ã—Å–æ–∫–∏–µ –ø–∏–Ω–≥–∏ (50-150 –º—Å)

–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å

‚úÖ –ù–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ –Ω–∞ –º–∞–≥–∏—Å—Ç—Ä–∞–ª—è—Ö

‚ùå –í–æ–∑–º–æ–∂–Ω—ã –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –∏–Ω–æ—Å—Ç—Ä–∞–Ω–Ω—ã—Ö IP

–¶–µ–Ω–∞

‚úÖ –î–µ—à–µ–≤–ª–µ (–æ—Ç 200‚ÇΩ/–º–µ—Å)

‚ö†Ô∏è –î–æ—Ä–æ–∂–µ (–æ—Ç $5/–º–µ—Å)

–ö–ª—é—á–µ–≤–æ–π –º–æ–º–µ–Ω—Ç: DPI –∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –≤ –†–æ—Å—Å–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ –Ω–∞ –≥—Ä–∞–Ω–∏—Ü–µ —Å–µ—Ç–∏ ‚Äî —Ç–∞–º, –≥–¥–µ —Ç—Ä–∞—Ñ–∏–∫ —É—Ö–æ–¥–∏—Ç –∑–∞ —Ä—É–±–µ–∂. –¢—Ä–∞—Ñ–∏–∫ –º–µ–∂–¥—É —Ä–æ—Å—Å–∏–π—Å–∫–∏–º–∏ —Å–µ—Ä–≤–µ—Ä–∞–º–∏ –æ–±—ã—á–Ω–æ –Ω–µ —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç—Å—è —Ç–∞–∫ –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–æ.

–í—ã (–ú–æ—Å–∫–≤–∞) ‚Üí VPS (–ú–æ—Å–∫–≤–∞) ‚Üí Telegram DC (–ê–º—Å—Ç–µ—Ä–¥–∞–º)
              ‚Üë –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –≤–Ω—É—Ç—Ä–∏ –†–§
                                ‚Üë –û—Å–Ω–æ–≤–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∑–¥–µ—Å—å (–Ω–æ –ø—Ä–æ–∫—Å–∏ —É–∂–µ –∑–∞–º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω!)

VS

–í—ã (–ú–æ—Å–∫–≤–∞) ‚Üí [–ì—Ä–∞–Ω–∏—Ü–∞ –†–§ + DPI] ‚Üí VPS (–ê–º—Å—Ç–µ—Ä–¥–∞–º) ‚Üí Telegram
              ‚Üë –ñ–Å–°–¢–ö–ê–Ø —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∑–¥–µ—Å—å!
–û–±—ä—è—Å–Ω–∏—Ç—å —Å
–ß—Ç–æ —Ç–∞–∫–æ–µ Fake TLS –∏ –ø–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ
–ö–æ–≥–¥–∞ –≤—ã –ø–æ–¥–∫–ª—é—á–∞–µ—Ç–µ—Å—å –∫ –æ–±—ã—á–Ω–æ–º—É MTProxy, —Ç—Ä–∞—Ñ–∏–∫ –∏–º–µ–µ—Ç —Ö–∞—Ä–∞–∫—Ç–µ—Ä–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã, –∫–æ—Ç–æ—Ä—ã–µ —Å–∏—Å—Ç–µ–º—ã DPI (–≥–ª—É–±–æ–∫–æ–π –∏–Ω—Å–ø–µ–∫—Ü–∏–∏ –ø–∞–∫–µ—Ç–æ–≤) –º–æ–≥—É—Ç —Ä–∞—Å–ø–æ–∑–Ω–∞—Ç—å. Fake TLS —Ä–µ—à–∞–µ—Ç —ç—Ç—É –ø—Ä–æ–±–ª–µ–º—É:

–ö–ª–∏–µ–Ω—Ç Telegram –∏–Ω–∏—Ü–∏–∏—Ä—É–µ—Ç –Ω–∞—Å—Ç–æ—è—â–∏–π TLS-—Ö–µ–Ω–¥—à–µ–π–∫ —Å –≤–∞—à–∏–º –ø—Ä–æ–∫—Å–∏.

–í –ø–æ–ª–µ SNI (Server Name Indication) —É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –¥–æ–º–µ–Ω –ª–µ–≥–∏—Ç–∏–º–Ω–æ–≥–æ —Å–∞–π—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–∞–π—Ç.ru).

–î–ª—è —Å—Ç–æ—Ä–æ–Ω–Ω–µ–≥–æ –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—è —Ç—Ä–∞—Ñ–∏–∫ –Ω–µ–æ—Ç–ª–∏—á–∏–º –æ—Ç –æ–±—ã—á–Ω–æ–≥–æ HTTPS-–∑–∞–ø—Ä–æ—Å–∞ –∫ —ç—Ç–æ–º—É —Å–∞–π—Ç—É.

–ß—Ç–æ –Ω–∞–º –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è
VPS-—Å–µ—Ä–≤–µ—Ä —Å Linux (Ubuntu/Debian) –æ—Ç 512 MB RAM.

Docker –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è.

–î–æ–º–µ–Ω–Ω–æ–µ –∏–º—è –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ, –Ω–æ –Ω—É–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –¥–æ–º–µ–Ω, –ø–æ–¥ –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ–º ¬´–ø—Ä—è—Ç–∞—Ç—å—Å—è¬ª.

–í—ã–±–æ—Ä –¥–æ–º–µ–Ω–∞ –¥–ª—è –º–∞—Å–∫–∏—Ä–æ–≤–∫–∏
–î–æ–º–µ–Ω –¥–æ–ª–∂–µ–Ω:

‚úÖ –†–µ–∑–æ–ª–≤–∏—Ç—å—Å—è (–∏–º–µ—Ç—å A-–∑–∞–ø–∏—Å—å –≤ DNS).

‚úÖ –†–∞–±–æ—Ç–∞—Ç—å –ø–æ HTTPS (–∏–º–µ—Ç—å SSL-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç).

‚úÖ –ë—ã—Ç—å –ø–æ–ø—É–ª—è—Ä–Ω—ã–º (–Ω–∞–ø—Ä–∏–º–µ—Ä: —Å–∞–π—Ç.ru, —Å–∞–π—Ç.ru, —Å–∞–π—Ç.ru).

–®–∞–≥ 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Docker —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω:

docker --version
–û–±—ä—è—Å–Ω–∏—Ç—å —Å
–ï—Å–ª–∏ –Ω–µ—Ç ‚Äî —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ:

curl -fsSL https://get.docker.com | sh
–û–±—ä—è—Å–Ω–∏—Ç—å —Å
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—Ä—Ç 443
MTProxy —Å Fake TLS –¥–æ–ª–∂–µ–Ω —Å–ª—É—à–∞—Ç—å –Ω–∞ –ø–æ—Ä—Ç—É 443. –ï—Å–ª–∏ –æ–Ω –∑–∞–Ω—è—Ç (Nginx/Apache), –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∏—Ö:

ss -tulpn | grep 443
systemctl stop nginx
–û–±—ä—è—Å–Ω–∏—Ç—å —Å
–®–∞–≥ 2. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–µ–∫—Ä–µ—Ç–∞ —Å Fake TLS
–ò—Å–ø–æ–ª—å–∑—É–µ–º –æ–±—Ä–∞–∑ nineseconds/mtg. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å–µ–∫—Ä–µ—Ç –¥–ª—è –Ω—É–∂–Ω–æ–≥–æ –¥–æ–º–µ–Ω–∞:

docker run --rm nineseconds/mtg:2 generate-secret --hex —Å–∞–π—Ç.ru
–û–±—ä—è—Å–Ω–∏—Ç—å —Å
–í—ã–≤–æ–¥ –±—É–¥–µ—Ç –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫–∏–º:

eedc591e24110c174ffd773d832dd69b1531632e7275

üìå –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —ç—Ç–æ—Ç —Å–µ–∫—Ä–µ—Ç! –û–Ω —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–µ—Ñ–∏–∫—Å ee –∏ –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –¥–æ–º–µ–Ω –º–∞—Å–∫–∏—Ä–æ–≤–∫–∏.

–®–∞–≥ 3. –ó–∞–ø—É—Å–∫ MTProxy
–ó–∞–ø—É—Å–∫–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π:

docker run -d \
  --name mtproto-proxy \
  --restart unless-stopped \
  -p 443:443 \
  nineseconds/mtg:2 \
  simple-run -n 1.1.1.1 -i prefer-ipv4 0.0.0.0:443 <–≤–∞—à_—Å–µ–∫—Ä–µ—Ç>
–û–±—ä—è—Å–Ω–∏—Ç—å —Å
–ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–∞–±–æ—Ç—É:
docker ps
# –û–∂–∏–¥–∞–µ–º —Å—Ç–∞—Ç—É—Å "Up" –Ω–∞ –ø–æ—Ä—Ç—É 443

docker logs mtproto-proxy
# –ï—Å–ª–∏ –ø—É—Å—Ç–æ ‚Äî –æ—à–∏–±–æ–∫ –Ω–µ—Ç
–û–±—ä—è—Å–Ω–∏—Ç—å —Å
–®–∞–≥ 4. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
–§–æ—Ä–º–∞—Ç —Å—Å—ã–ª–∫–∏:

tg://proxy?server=<IP>&port=443&secret=<—Å–µ–∫—Ä–µ—Ç>

–£–∑–Ω–∞—Ç—å —Å–≤–æ–π IP: curl -s ifconfig.me

–ü—Ä–∏–º–µ—Ä —Å—Å—ã–ª–∫–∏:

tg://proxy?server=185.101.139.232&port=443&secret=eedc195e24100c174ffd772d862dd69b1532632e7275

–®–∞–≥ 5. –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
–°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞ (start-mtproxy.sh)
#!/bin/bash
CONTAINER_NAME="mtproto-proxy"
SECRET="–í–ê–®_–°–ï–ö–†–ï–¢"
PORT="443"

docker stop ${CONTAINER_NAME} >/dev/null 2>&1
docker rm ${CONTAINER_NAME} >/dev/null 2>&1

docker run -d \
  --name ${CONTAINER_NAME} \
  --restart unless-stopped \
  -p ${PORT}:${PORT} \
  nineseconds/mtg:2 \
  simple-run -n 1.1.1.1 -i prefer-ipv4 0.0.0.0:${PORT} ${SECRET}
–û–±—ä—è—Å–Ω–∏—Ç—å —Å
–°–∫—Ä–∏–ø—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ (mtproxy-stats.sh)
#!/bin/bash
echo "üìä MTProxy Statistics"
docker exec mtproto-proxy ss -tn 2>/dev/null | grep ":443" | wc -l | xargs echo "Active connections:"
docker logs mtproto-proxy --tail 5 2>&1
–û–±—ä—è—Å–Ω–∏—Ç—å —Å
–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å
–ú–µ—Ç–æ–¥ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏

–†–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–æ—Ç–∏–≤ Fake TLS?

–ü–æ—á–µ–º—É

–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ IP

‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ

–†–∏—Å–∫ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ª–µ–≥–∏—Ç–∏–º–Ω—ã–π —Ç—Ä–∞—Ñ–∏–∫ —Ä—è–¥–æ–º

DPI –ø–æ –ø—Ä–æ—Ç–æ–∫–æ–ª—É

‚ùå –ù–µ—Ç

–¢—Ä–∞—Ñ–∏–∫ –Ω–µ–æ—Ç–ª–∏—á–∏–º –æ—Ç HTTPS

–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ SNI

‚ùå –ù–µ—Ç

SNI –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç ¬´–±–µ–ª—ã–π¬ª –¥–æ–º–µ–Ω (1c.ru)

–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:

–ù–µ –ø—É–±–ª–∏–∫—É–π—Ç–µ —Å—Å—ã–ª–∫—É –ø—É–±–ª–∏—á–Ω–æ.

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ –ø–æ—Ä—Ç 443.

–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º
–ü–æ—Ä—Ç –∑–∞–Ω—è—Ç: ss -tulpn | grep 443 –Ω–∞–π–¥–∏—Ç–µ –∏ —É–±–µ–π—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å.

–û—à–∏–±–∫–∞ DNS: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–ª–∞–≥ -n 1.1.1.1 –¥–ª—è Cloudflare DNS.

–ó–∞–≤–∏—Å–∞–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –æ—Ç–∫—Ä—ã—Ç –ª–∏ –ø–æ—Ä—Ç 443 –≤ Firewall –≤–∞—à–µ–≥–æ VPS –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞.

–ò—Ç–æ–≥–∏
–ú—ã —Ä–∞–∑–≤–µ—Ä–Ω—É–ª–∏ MTProto Proxy —Å –º–∞—Å–∫–∏—Ä–æ–≤–∫–æ–π Fake TLS –∑–∞ 15 –º–∏–Ω—É—Ç. –≠—Ç–æ —Å–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–± –æ–±–µ—Å–ø–µ—á–∏—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ Telegram –±–µ–∑ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ª–∏—à–Ω–µ–≥–æ —Å–æ—Ñ—Ç–∞ –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω—ã –∏–ª–∏ –ü–ö.